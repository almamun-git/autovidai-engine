services:
  # Backend API (Docker based web service)
  - type: web
    name: autovidai-api
    env: docker
    plan: free
    dockerfilePath: ./Dockerfile
    dockerContext: .
    autoDeploy: true
    healthCheckPath: /health
    envVars:
      - key: GEMINI_API_KEY
        sync: false
      - key: PEXELS_API_KEY
        sync: false
      - key: ELEVENLABS_API_KEY
        sync: false
      - key: SHOTSTACK_API_KEY
        sync: false
      - key: SHOTSTACK_STAGE
        value: v1
      - key: RENDER_BACKEND
        value: local

  # Frontend (Vite build served via Docker/Nginx)
  - type: web
    name: autovidai-web
    env: docker
    plan: free
    dockerfilePath: ./frontend/Dockerfile
    dockerContext: ./frontend
    autoDeploy: true
    envVars:
      - key: VITE_API_BASE
        value: https://autovidai-api.onrender.com
        # Update this after backend deployment with the actual backend URL